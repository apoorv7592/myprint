$(document).ready(function(){var t={el:null,init:function(t){this.el=$(t),0!=this.el.length&&($(this.el.attr("data-trigger")).click(this,this.open),this.el.find("[data-dismiss='post-preview']").click(this,this.close))},open:function(t){var e=t.data.el,o=e.find("iframe")[0];if(o.contentDocument)var n=o.contentDocument;else if(o.contentWindow)var n=o.contentWindow.document;else var n=o.document;$("#post_content").val(CKEDITOR.instances.post_content.getData()),$.post(e.attr("data-url"),$("form").serialize(),function(e){n.open(),n.writeln(e),n.close(),$(n).keydown(t.data,t.data.keydown)}),e.show(),$("body").attr("style","overflow:hidden;"),$(document).on("keydown.post-preview",t.data,t.data.keydown)},keydown:function(t){27==t.keyCode&&t.data.close()},close:function(t){var e=void 0==t?this.el:t.data.el;e.hide(),$("body").attr("style","overflow:auto;"),$(document).off("keydown.post-preview")}};t.init("[data-toggle='post-preview']")});