(function(){$(document).ready(function(){return window.productTemplate=Handlebars.compile($("#product_template").text()),$("#taxon_products").sortable(),$("#taxon_products").on("sortstop",function(t,a){return $.ajax({url:Spree.routes.classifications_api,method:"PUT",data:{product_id:a.item.data("product-id"),taxon_id:$("#taxon_id").val(),position:a.item.index()}})}),$("#taxon_id").length>0&&$("#taxon_id").select2({dropdownCssClass:"taxon_select_box",placeholder:Spree.translations.find_a_taxon,ajax:{url:Spree.routes.taxons_search,datatype:"json",data:function(t,a){return{per_page:50,page:a,q:{name_cont:t}}},results:function(t,a){var e;return e=a<t.pages,{results:t.taxons,more:e}}},formatResult:function(t){return t.pretty_name},formatSelection:function(t){return t.pretty_name}}),$("#taxon_id").on("change",function(t){var a;return a=$("#taxon_products"),$.ajax({url:Spree.routes.taxon_products_api,data:{id:t.val},success:function(t){var e,n,o,r;if(a.empty(),0===t.products.length)return $("#sorting_explanation").hide(),$("#taxon_products").html("<div class='alert alert-info'>"+Spree.translations.no_results+"</div>");for(r=t.products,n=0,o=r.length;o>n;n++)e=r[n],void 0!==e.master.images[0]&&void 0!==e.master.images[0].small_url&&(e.image=e.master.images[0].small_url),a.append(productTemplate({product:e}));return $("#sorting_explanation").show()}})})})}).call(this);